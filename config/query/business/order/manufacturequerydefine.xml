<?xml version="1.0" encoding="UTF-8"?>
<root>
  <query>
    <pool></pool>    
    <name value="getRequisitionById" />
     <where>
       <w name="A.YSId" des=""  reqName="YSId" dtype="ch" oper="="  lg="AND" bt="" />
       <w name="A.requisitionId" des=""  reqName="requisitionId" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name="A.YSId" alias="" ctype="" />
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.requisitionId" alias="" ctype="" />
      <f name="a.requisitionDate" alias="" ctype="" />
      <f name="a.storeUserId" alias="" ctype="" />
      <f name="a.requisitionUserId" alias="" ctype="" />      
      <f name="b.loginName" alias="storeUser" ctype="" />  
      <f name="c.loginName" alias="requisitionUser" ctype="" />
      <f name="a.deleteFlag" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_requisition a LEFT JOIN s_user b ON a.storeUserId=b.UserID AND b.deleteFlag='0' LEFT JOIN s_user c ON a.requisitionUserId=c.UserID AND c.deleteFlag='0'  where a.deleteFlag='0'</from>
    <orderby>a.requisitionId </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getRequisitionZZById" />
     <where>
       <w name="A.YSId" des=""  reqName="YSId" dtype="ch" oper="="  lg="AND" bt="" />
       <w name="A.requisitionId" des=""  reqName="requisitionId" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.collectYsid" alias="" ctype="" />
      <f name="a.requisitionId" alias="" ctype="" />
      <f name="a.requisitionDate" alias="" ctype="" />
      <f name="a.storeUserId" alias="" ctype="" />
      <f name="a.requisitionUserId" alias="" ctype="" />      
      <f name="b.loginName" alias="storeUser" ctype="" />  
      <f name="c.loginName" alias="requisitionUser" ctype="" />
      <f name="a.deleteFlag" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_requisition a LEFT JOIN s_user b ON a.storeUserId=b.UserID AND b.deleteFlag='0' LEFT JOIN s_user c ON a.requisitionUserId=c.UserID AND c.deleteFlag='0'  where a.deleteFlag='0'</from>
    <orderby>a.requisitionId </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getPurchasePlanByYSId" />
    <where>
    	<w name="A.YSId" des="" reqName="YSId" dtype="ch" oper="=" lg="AND" bt="" />
    </where>
  	<select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="a.materialName" alias="" ctype="" />
      <f name="contractId" alias="" ctype="" />
      <f name="a.supplierId" alias="" ctype="" />
      <f name="a.manufactureQuantity" alias="" ctype="" />
      <f name="a.contractStorage" alias="" ctype="" />
      <f name="a.quantityOnHand" alias="" ctype="" />
      <f name="a.availabelToPromise" alias="" ctype="" />
      <f name="a.totalRequisition" alias="" ctype="" />
      <f name="a.unitQuantity" alias="" ctype="" />
      <f name="a.unit" alias="" ctype="计量单位" />
      <f name="a.contractMaterialId" alias="" ctype="" />
      <f name="a.purchaseType" alias="purchaseTypeName" ctype="物料采购类别" />
      <f name="a.purchaseType" alias="" ctype="" />
      <f name="b.areaNumber" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
   <from>v_createrequisitionfromplan AS A LEFT JOIN v_purchasestockindetailgroup b ON b.YSId=a.YSId AND b.materialId=a.materialId  WHERE  A.deleteFlag = '0'</from>
  
    <groupby></groupby>
    <having></having>
    
    <union>
	    <where>
    		<w name="b.YSId" des="" reqName="YSId" dtype="ch" oper="=" lg="AND" bt="" />
	    </where>	    
	    <select>
	      <f name="''" alias="recordId" ctype="" />
	      <f name="c.YSId" alias="YSId" ctype="" />
	      <f name="b.rawMaterialId" alias="materialId" ctype="" />
	      <f name="b.materialName" alias="" ctype="" />
	      <f name="''" alias="contractId" ctype="" />
	      <f name="''" alias="supplierId" ctype="" />
	      <f name="b.totalQuantity" alias="manufactureQuantity" ctype="" />
	      <f name="''" alias="contractStorage" ctype="" />
	      <f name="quantityOnHand" alias="" ctype="" />
	      <f name="b.availabelToPromise" alias="" ctype="" />
	      <f name="IFNULL(c.quantity,'0.00')" alias="totalRequisition" ctype="" />
	      <f name="'-'" alias="unitQuantity" ctype="" />
	      <f name="b.unit" alias="" ctype="计量单位" />
	      <f name="''" alias="contractMaterialId" ctype="" />
	      <f name="'原材料'" alias="purchaseTypeName" ctype="物料采购类别" />
	      <f name="'050'" alias="purchaseType" ctype="" />
      	  <f name="''" alias="areaNumber" ctype="" />
	    </select>
	    <from>v_purchaseplandetailzz b LEFT JOIN v_requisitiondetailgroup c ON b.rawMaterialId=c.materialId AND b.YSId=c.YSId AND c.deleteFlag='0' where</from>	
	    <groupby></groupby>
	    <having></having>
    </union>
    
    <orderby>materialId</orderby>
	<power></power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getMAXRequisitionId" />
     <where>
       <w name="A.parentId" des=""  reqName="parentId" dtype="ch" oper="="  lg="" bt="" />
    </where>
  <select>
      <f name=" IFNULL(MAX(a.subId+1),1)" alias="MaxSubId" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_requisition a</from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power></power>
  </query>
  
  <query>
    <pool></pool>    
    <name value="getMAXTaskId" />
     <where>
       <w name="A.parentId" des=""  reqName="parentId" dtype="ch" oper="="  lg="" bt="" />
    </where>
  <select>
      <f name=" IFNULL(MAX(a.subId+1),1)" alias="MaxSubId" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_ProductionTask a</from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power></power>
  </query>
  <query>
    <pool></pool>    
    <name value="getRequisitionDetailById" />
     <where>
        <w name="A.requisitionId" des=""  reqName="requisitionId" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="b.materialName" alias="" ctype="" />
      <f name="b.purchaseType" alias="" ctype="物料采购类别" />
      <f name="a.requisitionId" alias="" ctype="" />
      <f name="format(replace(a.quantity,',',''),2)" alias="quantity" ctype="" />
      <f name="IFNULL(a.overQuantity,0)" alias="overQuantity" ctype="" />
      <f name="a.deleteFlag" alias="" ctype="" />
      <f name="IFNULL(a.contractId,'-')" alias="contractId" ctype="" />
      <f name="IFNULL(a.supplierId,'-')" alias="supplierId" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_requisitionDetail a LEFT JOIN b_material b ON a.materialId=b.materialId AND b.deleteFlag='0'  where a.deleteFlag='0'</from>
    <orderby>a.materialId </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="updateRequisition" />
    <where>
        <w name="A.requisitionId" des=""  reqName="requisitionId" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  	<select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.detailRecordId" alias="" ctype="" />
      <f name="a.requisitionId" alias="" ctype="" />
      <f name="a.requisitionDate" alias="" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="a.materialName" alias="" ctype="" />
      <f name="a.contractId" alias="" ctype="" />
      <f name="a.supplierId" alias="" ctype="" />
      <f name="c.manufactureQuantity" alias="" ctype="" />
      <f name="a.quantityOnHand" alias="" ctype="" />
      <f name="a.availabelToPromise" alias="" ctype="" />
      <f name="c.totalRequisition" alias="" ctype="" />
      <f name="c.unitQuantity" alias="" ctype="" />
      <f name="a.unit" alias="" ctype="计量单位" />
      <f name="c.materialId" alias="contractMaterialId" ctype="" />
      <f name="a.purchaseType" alias="" ctype="物料采购类别" />
      <f name="a.quantity" alias="" ctype="" />
      <f name="a.overQuantity" alias="" ctype="" />
      <f name="a.subBomNo" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
   <from>v_requisitiondetail  AS A LEFT JOIN  b_purchaseplandetail c ON a.ysid = c.ysid AND  c.materialId = a.materialId AND c.subBomNo = a.subBomNo AND c.deleteFlag = '0' WHERE  A.deleteFlag = '0'</from>
    <orderby>A.materialId</orderby>
    <groupby></groupby>
    <having></having>
	<power></power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getPurchasePlanDetailGroup" />
    <where>
    	<w name="A.YSId" des="" reqName="YSId" dtype="ch" oper="=" lg="AND" bt="" />
    </where>
  	<select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="a.materialName" alias="" ctype="" />
      <f name="a.supplierId" alias="" ctype="" />
      <f name="a.manufactureQuantity" alias="" ctype="" />
      <f name="a.quantityOnHand" alias="" ctype="" />
      <f name="a.availabelToPromise" alias="" ctype="" />
      <f name="a.unitQuantity" alias="" ctype="" />
      <f name="a.unit" alias="" ctype="计量单位" />
      <f name="a.purchaseType" alias="" ctype="物料采购类别" />
      <f name="IFNULL(b.quantity,0)" alias="quantity" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
   <from>v_purchaseplandetailgroup AS A LEFT JOIN v_workshopreturngroup b ON b.YSId=a.YSId AND b.materialId=a.materialId WHERE  A.deleteFlag = '0' AND a.supplierId != '0574YZ00' AND left(a.materialId,1) != 'H' AND a.purchaseType = '010'  </from>
    <orderby>A.materialId</orderby>
    <groupby></groupby>
    <having></having>
	<power></power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getWorkshopReturnList" />
    <where>
    	<w name="a.YSId" des="" reqName="YSId" dtype="ch" oper="=" lg="AND" bt="" />
    	<w name="a.workshopReturnId" des="" reqName="workshopReturnId" dtype="ch" oper="=" lg="AND" bt="" />
    </where>
  	<select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.workshopReturnId" alias="" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="a.returnDate" alias="" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="a.quantity" alias="" ctype="" />
      <f name="b.materialName" alias="" ctype="" />
      <f name="b.unit" alias="" ctype="计量单位" />
      <f name="b.recordId" alias="materialRecordId" ctype="" />
      <f name="b.parentId" alias="materialParentId" ctype="" />
      <f name="a.taskId" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
   <from>b_workshopreturn a LEFT JOIN b_material b ON b.materialId = a.materialId AND b.deleteFlag = '0' where a.deleteFlag='0'</from>
    <orderby>a.workshopReturnId DESC,a.materialId</orderby>
    <groupby></groupby>
    <having></having>
	<power></power>    
  </query>
  
  <query>
    <pool></pool>    
    <name value="getRawMaterialList" />
    <where>
    	<w name="b.YSId" des="" reqName="YSId" dtype="ch" oper="in" lg="AND" bt="" />
    </where>
  	<select>
	      <f name="b.rawMaterialId" alias="materialId" ctype="" />
	      <f name="b.materialName" alias="" ctype="" />
	      <f name="SUM(REPLACE(b.totalQuantity,',',''))" alias="manufactureQuantity" ctype="" />
	      <f name="b.quantityOnHand" alias="" ctype="" />
	      <f name="b.availabelToPromise" alias="" ctype="" />
	      <f name="IFNULL(c.quantity,'0')" alias="totalRequisition" ctype="" />
	      <f name="b.unit" alias="" ctype="计量单位" />
	      <f name="b.unit" alias="unitId" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
   <from>v_purchaseplandetailzz b LEFT JOIN v_requisitiondetailgroup c ON b.rawMaterialId = c.materialId AND c.YSId='#' AND c.deleteFlag = '0'</from>
    <orderby>b.rawMaterialId</orderby>
    <groupby>b.rawMaterialId</groupby>
    <having></having>
	<power></power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getOrderListForZZ" />
    <where>
      <w name="A.full_field" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.full_field" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="B.YSId"       des=""  reqName="YSId"      dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="b.materialId" alias="" ctype="" />
      <f name="b.materialName" alias="" ctype="" />
      <f name="b.PIId" alias="" ctype="" />
      <f name="b.YSId" alias="" ctype="" />
      <f name="b.quantity" alias="" ctype="" />
      <f name="b.price" alias="" ctype="" />
      <f name="b.totalprice" alias="" ctype="" />
      <f name="b.totalQuantity" alias="" ctype="" />
      <f name="b.status" alias="statusName" ctype="订单状态" />
      <f name="b.status" alias="" ctype="" />
      <f name="b.returnQuantity" alias="" ctype="" />
      <f name="b.orderCost" alias="" ctype="" />
      <f name="b.orderDate" alias="" ctype="" />
      <f name="b.deliveryDate" alias="" ctype="" />
      <f name="b.storageDate" alias="" ctype="" />
      <f name="b.rebateRate" alias="" ctype="" />
      <f name="A.full_field" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <!-- status = '0' 表示 订单状态为 "新建"  A.status = '0' AND   -->
    <from>v_orderdetailforzz AS A LEFT JOIN v_orderlist b ON a.YSId=b.ysid AND (b.status='020' OR b.status='030') AND b.deleteFlag='0'</from>
    <orderby>A.YSId DESC </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
</root>