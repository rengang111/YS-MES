<?xml version="1.0" encoding="UTF-8"?>
<root>
  <query>
    <pool></pool>     
    <name value="getOrderListDemand" />
    <where>
      <w name="A.full_field" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.full_field" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="" bt="" />   
     </where>
    <select>
      <f name="A.recordId" alias="" ctype="" />
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.shippingCase" alias="" ctype="" />
      <f name="A.loadingPort" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.orderId" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.status" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
      <f name="A.full_field" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <!-- status = '0' 表示 订单状态为 "新建" -->
    <from>v_orderlist AS A WHERE A.status = '3' AND  A.deleteFlag = '0'</from>
    <orderby>A.YSId DESC</orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getOrderExpenseList" />
    <where>
      <w name="A.full_field" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.full_field" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="AND" bt="" />   
      <w name="a.checkInDate"    des="" reqName="startDate" dtype="ch" oper="&gt;"  lg="AND" bt="" />
      <w name="a.checkInDate"    des="" reqName="endDate"   dtype="ch" oper="&lt;"  lg="AND" bt="" />
      <w name="a.deliveryDate"   des="" reqName="orderStartDate" dtype="ch" oper="&gt;"  lg="AND" bt="" />
      <w name="a.deliveryDate"   des="" reqName="orderEndDate"   dtype="ch" oper="&lt;"  lg="AND" bt="" />
    </where>
    <select>
      <f name="A.productId" alias="" ctype="" />
      <f name="A.productName" alias="" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.systemQty" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.checkInDate" alias="" ctype="" />
      <f name="a.cost" alias="cost" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="IF(a.stockinQty=0,REPLACE(a.systemQty,',',''),a.stockinQty)" alias="stockinQty" ctype="" />
      <f name="c.cost" alias="kehuCost" ctype="" />
      <f name="e.cost" alias="jianyanCost" ctype="" />
      <f name="s.cost" alias="gongyingshangCost" ctype="" />
      <f name="w.cost" alias="chejianCost" ctype="" />
      <f name="d.cost" alias="gendanCost" ctype="" />
      <f name="A.full_field" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <from>v_orderexpanselist a LEFT JOIN v_orderexpanse_groupby_type d ON a.YSId=d.YSId AND d.type='D' LEFT JOIN v_orderexpanse_groupby_type s ON a.YSId=s.YSId AND s.type='S' LEFT JOIN v_orderexpanse_groupby_type w ON a.YSId=w.YSId AND w.type='W' LEFT JOIN v_orderexpanse_groupby_type e ON a.YSId=e.YSId AND e.type='E' LEFT JOIN v_orderexpanse_groupby_type c ON a.YSId=c.YSId AND c.type='C'</from>
    <orderby>a.YSId</orderby>
    <groupby></groupby>
    <having>#</having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getOrderList" />
    <where>
      <w name="A.full_field" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.full_field" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.PIId"       des=""  reqName="PIId"      dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.YSId"       des=""  reqName="YSId"      dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.peiYsid"    des=""  reqName="peiYsid"   dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.orderType"  des=""  reqName="orderType" dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.status"  des=""  reqName="status" dtype="ch" oper="in"  lg="AND" bt="" />
   	  <w name="A.orderNature"  des=""  reqName="orderNature" dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.recordId" alias="" ctype="" />
      <f name="A.detailRecordId" alias="" ctype="" />
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.totalQuantity" alias="" ctype="" />
      <f name="A.shippingCase" alias="" ctype="" />
      <f name="A.loadingPort" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.orderId" alias="" ctype="" />
      <f name="A.orderRecordId" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.unit" alias="" ctype="计量单位" />
      <f name="A.currency" alias="" ctype="币种" />
      <f name="A.currency" alias="currencyId" ctype="" />
      <f name="A.customerFullName" alias="" ctype="" />
      <f name="A.sysValue" alias="" ctype="" />
      <f name="A.team" alias="" ctype="业务组" />
      <f name="A.orderCompany" alias="" ctype="" />
      <f name="A.productClassify" alias="productClassifyName" ctype="版本类别" />
      <f name="A.productClassify" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
      <f name="A.orderNature" alias="orderNatureName" ctype="订单性质" />
      <f name="A.orderNature" alias="" ctype="" />
      <f name="A.status" alias="statusName" ctype="订单状态" />
      <f name="A.status" alias="" ctype="" />
      <f name="A.returnQuantity" alias="" ctype="" />
      <f name="A.orderCost" alias="" ctype="" />
      <f name="A.storageDate" alias="" ctype="" />
      <f name="A.rebateRate" alias="" ctype="" />
      <f name="A.completedQuantity" alias="" ctype="" />
      <f name="A.completedNumber" alias="" ctype="" />
      <f name="A.full_field" alias="" ctype="" />
      <f name="A.peiYsid" alias="" ctype="" />
      <f name="A.quantityOnHand" alias="" ctype="" />
      <f name="IFNULL(A.rebate,'0')" alias="discount" ctype="" />
      <f name="IFNULL(A.commission,'0')" alias="commission" ctype="" />
      <f name="A.customerId" alias="" ctype="" />
      <f name="A.shortName" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <!-- status = '0' 表示 订单状态为 "新建"  A.status = '0' AND   -->
    <from>v_orderlist AS A WHERE A.deleteFlag = '0'</from>
    <orderby>left(A.YSId,8) DESC,mid(A.YSId,LOCATE('-',A.YSId)+1,2)+0</orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="orderTrackingList2" />
    <where>
      <w name="A.fullField" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.fullField" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.YSId"       des=""  reqName="YSId"      dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.orderType"  des=""  reqName="orderType" dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="A.status"  des=""  reqName="status" dtype="ch" oper="in"  lg="AND" bt="" />
   	  <w name="A.orderNature"  des=""  reqName="orderNature" dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="d.status"  des=""  reqName="follow" dtype="ch" oper="="  lg="AND" bt="" />
   	  <w name="c.deliveryDate"  des=""  reqName="startDate" dtype="ch" oper="&gt;="  lg="AND" bt="" />
   	  <w name="c.deliveryDate"  des=""  reqName="endDate"   dtype="ch" oper="&lt;="  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.quantity" alias="contractQty" ctype="" />
      <f name="IFNULL(b.quantity,0)" alias="stockinQty" ctype="" />
      <f name="IFNULL(c.quantity,0)" alias="orderQty" ctype="" />
      <f name="c.materialParentId" alias="productParentId" ctype="" />
      <f name="c.materialRecordId" alias="productRecordId" ctype="" />
      <f name="c.materialId" alias="productId" ctype="" />
      <f name="c.materialName" alias="productName" ctype="" />
      <f name="c.deliveryDate" alias="" ctype="" />
      <f name="d.status" alias="followStatus" ctype="" />
    </select>
    <from>v_purchaseorderdetail a LEFT JOIN b_Follow d ON d.YSId=a.YSId AND d.followType='1' AND d.deleteFlag='0' LEFT JOIN v_purchasestockin_groupby_ysid_materialid b ON a.materialId = b.materialId AND a.ysid=b.ysid JOIN v_orderdetail c ON c.YSId=a.YSId AND c.deleteFlag='0' AND c.status not in('040','041','050','051') AND LEFT(c.materialId,1) = 'I'</from>
    <orderby>d.status DESC,a.YSId </orderby>
    <groupby>a.YSId</groupby>
    <having>#</having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="orderTrackingList" />
    <where>
   	  <w name="d.status"  des=""  reqName="follow" dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="c1.YSId"       alias="" ctype="" />
      <f name="c1.contractQty"   alias="" ctype="" />
      <f name="c1.orderQty"   alias="" ctype="" />
      <f name="c1.productId" alias="" ctype="" />
      <f name="c2.materialName"   alias="productName" ctype="" />
      <f name="c1.deliveryDate"   alias="" ctype="" />
      <f name="c3.status"         alias="followStatus" ctype="" />
      <f name="SUM(c1.stockFlag)" alias="stockFlag" ctype="" />
      <f name="round(sum(c1.manufactureQuantity),2)" alias="manufactureQuantity" ctype="" />
      <f name="round(sum(c1.stockoutQty),2)" alias="stockoutQty" ctype="" />
    </select>
    <from>
		(
			SELECT
				if( IFNULL(b3.stockoutQty,0) >= b1.manufactureQuantity,
					0,
					IF(b1.contractQty IS NULL,
						IF(b1.quantityOnHand+0 >= (b1.manufactureQuantity - IFNULL(b3.stockoutQty,0)),0,1),
						IF(b2.stockinQty >= b1.contractQty,0,1)
					)
				) stockFlag,
				if( IFNULL(b3.stockoutQty,0) >= b1.manufactureQuantity,
					0,
					1
				) stockoutEnd,
				b1.YSId,
				b1.productId,
				b1.materialId,
				b1.manufactureQuantity,
				b1.contractQty,
				b1.deliveryDate,
				b1.orderQty,
				b2.stockinQty,
				b1.quantityOnHand,
				b3.stockoutQty
			FROM
				(
					SELECT
					a1.YSId,
					a1.productId,
					a1.materialId,
					a1.deliveryDate,
					a1.orderQty,
					REPLACE(a2.quantity,',','') AS contractQty,
					a1.quantityOnHand,
					a1.manufactureQuantity
					FROM
						(SELECT
							c.YSId,c.productId,c.materialId,
							c.unitQuantity * REPLACE(ord.quantity,',','') AS manufactureQuantity,
							REPLACE(c.quantityOnHand,',','') AS quantityOnHand,
							ord.deliveryDate,
							ord.totalQuantity AS orderQty
						FROM
							v_purchaseplan  c
							LEFT JOIN v_orderlist ord ON ord.YSId = c.YSId
						WHERE 
							#0
						) a1
						LEFT JOIN v_purchaseorderdetail a2 ON a2.YSId = a1.YSId  AND a2.materialId = a1.materialId
				) b1
					LEFT JOIN 
					( SELECT b4.ysid,b4.materialId,
					  	sum(replace(b4.quantity,',','')) stockinQty
					  FROM v_purchasestockindetail b4,v_orderlist ord  
					  WHERE b4.ysid = ord.ysid AND
							#0 
							GROUP BY b4.ysid,b4.materialId
					) b2 ON b1.materialId = b2.materialId AND b2.ysid = b1.ysid
					LEFT JOIN
					( SELECT b4.ysid,b4.materialId,
						sum(replace(b4.quantity,',','')) stockoutQty
					  FROM v_stockout b4,v_orderlist ord  
					  WHERE b4.ysid = ord.ysid AND
							#0 
							GROUP BY b4.ysid,b4.materialId
					) b3 ON b1.materialId = b3.materialId AND b3.ysid = b1.ysid
		) c1
		LEFT JOIN b_material c2 ON c2.materialId = c1.productId 
		LEFT JOIN b_Follow c3 ON c3.YSId = c1.YSId AND c3.followType = '1' AND c3.deleteFlag = '0'
    	WHERE 1=1 
    </from>
    <orderby>c3.modifyTime DESC,c1.YSId </orderby>
    <groupby>c1.YSId</groupby>
    <having>#1</having>
	<power></power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getOrderViewByPIId" />
    <where>
      <w name="A.PIId" des=""  reqName="keywords1" dtype="ch" oper="="  lg="AND" bt="" />
      <w name="A.YSId" des=""  reqName="YSId" dtype="ch" oper="="  lg="AND" bt="" />
      <w name="A.peiYsid" des=""  reqName="peiYsid" dtype="ch" oper="="  lg="AND" bt="" />
      <w name="A.YSId" des=""  reqName="key" dtype="ch" oper="like"  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.orderRecordId" alias="" ctype="" />
      <f name="A.detailRecordId" alias="" ctype="" />
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.customerId" alias="" ctype="" />
      <f name="A.shortName" alias="" ctype="" />
      <f name="A.CustomerName" alias="fullName" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.total" alias="" ctype="" />
      <f name="A.currency" alias="currencyId" ctype="" />
      <f name="A.shippingCase" alias="shippingCaseId" ctype="" />
      <f name="A.loadingPort" alias="loadingPortId" ctype="" />
      <f name="A.deliveryPort" alias="deliveryPortId" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.paymentTerm" alias="" ctype="" />
      <f name="A.currency" alias="currency" ctype="币种" />
      <f name="A.shippingCase" alias="shippingCase" ctype="出运条件" />
      <f name="A.loadingPort" alias="loadingPort" ctype="出运港" />
      <f name="A.deliveryPort" alias="deliveryPort" ctype="目的港" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.completedQuantity" alias="" ctype="" />
      <f name="A.totalQuantity" alias="" ctype="" />
      <f name="A.completedNumber" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.RMBPrice" alias="" ctype="" />
      <f name="A.orderCost" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.orderId" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.extraQuantity" alias="" ctype="" />
      <f name="A.orderCompany" alias="orderCompanyName" ctype="下单公司" />
      <f name="A.orderCompany" alias="" ctype="" />
      <f name="A.team" alias="teamId" ctype="" />
      <f name="A.team" alias="" ctype="业务组" />
      <f name="A.productClassify" alias="productClassifyName" ctype="版本类别" />
      <f name="A.productClassify" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
      <f name="A.materialParentId" alias="" ctype="" />
      <f name="A.materialRecordId" alias="" ctype="" />
      <f name="A.orderNature" alias="orderNatureName" ctype="订单性质" />
      <f name="A.orderNature" alias="" ctype="" />
      <f name="A.status" alias="statusName" ctype="订单状态" />
      <f name="A.status" alias="" ctype="" />
      <f name="A.returnQuantity" alias="" ctype="" />
      <f name="replace(a.totalQuantity,',','') - IFNULL(replace(b.quantity,',',''),0)" alias="surplus" ctype="" />
      <f name="A.peiYsid" alias="" ctype="" />
      <f name="concat( a.rebateRate*100/100,'%')" alias="rebateRate" ctype="" />
      <f name="IFNULL(b.quantity,'0')" alias="stockinQty" ctype="" />
      <f name="b.checkInDate" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>v_orderlist AS A LEFT JOIN v_purchasestockin_groupby_ysid_materialid b ON a.YSId=b.YSId AND a.materialId=b.materialId WHERE A.deleteFlag = '0' </from>
    <orderby>left(A.YSId,8),mid(A.YSId,LOCATE('-',A.YSId)+1,2)+0</orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getCustomer" />
    <where>
      <w name="A.full_field" des=""  reqName="keywords1" dtype="ch" oper="like"  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.recordId" alias="" ctype="" />
      <f name="A.customerId" alias="" ctype="" />
      <f name="A.shortName" alias="" ctype="" />
      <f name="A.customerName" alias="" ctype="" />
      <f name="A.paymentTerm" alias="" ctype="" />
      <f name="A.country" alias="" ctype="" />
      <f name="A.currency" alias="currencyName" ctype="币种" />
      <f name="A.shippingCondition" alias="shippingConditionName" ctype="出运条件" />
      <f name="A.shippiingPort" alias="shippiingPortName" ctype="出运港" />
      <f name="A.destinationPort" alias="destinationPortName" ctype="目的港" />
      <f name="A.currency" alias="" ctype="" />
      <f name="A.shippingCondition" alias="" ctype="" />
      <f name="A.shippiingPort" alias="" ctype="" />
      <f name="A.destinationPort" alias="" ctype="" />
      <f name="CONCAT_WS(' | ',A.CustomerID,A.shortName, CustomerName)" alias="viewList" ctype="" />
      <f name="A.full_field" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>v_customer AS A</from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getOrderSubIdByParentId" />
    <where>
       <w name="A.parentId" des=""  reqName="keywords1" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
    <select>
      <f name=" IFNULL(max(subId+0),'0')" alias="MaxSubId" ctype="" />
      <f name="A.parentId" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_order AS A </from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getYSIdByParentId" />
     <where>
       <w name="A.parentId" des=""  reqName="keywords1" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name=" IFNULL(max(subId+0),'0')" alias="MaxSubId" ctype="" />
      <f name="A.parentId" alias="" ctype="" />
      <f name="A.subId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_orderdetail AS A </from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getMAXOrderBomId" />
     <where>
       <w name="A.materialId" des=""  reqName="keywords1" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name=" IFNULL(max(subId+0),'0')" alias="MaxSubId" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_orderbom AS A </from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  
  <query>
    <pool></pool>     
    <name value="getOrderDetailByPIId" />
    <where>
      <w name="A.PIId" des=""  reqName="keywords1" dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.recordid" alias="" ctype="" />
      <f name="A.ysid" alias="" ctype="" />
      <f name="A.piid" alias="" ctype="" />
      <f name="A.parentid" alias="" ctype="" />
      <f name="A.materialid" alias="" ctype="" />
      <f name="A.customerid" alias="" ctype="" />
      <f name="A.paymentterm" alias="" ctype="" />
      <f name="A.currency" alias="currency" ctype="" />
      <f name="A.shippingcasename" alias="" ctype="" />
      <f name="A.loadingportname" alias="" ctype="" />
      <f name="A.deliveryport=" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.orderdate" alias="" ctype="" />
      <f name="A.orderid" alias="" ctype="" />
      <f name="A.deliverydate" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_orderdetail AS A </from>
    <orderby>A.PIId,A.YSId</orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="searchmin_price" />
    <where>
      <w name="A.supplierId" des=""  reqName="keywords1" dtype="ch" oper="like"  lg="AND" bt="" />
     </where>
    <select>
      <f name=" IFNULL(min(A.price+0),'0')" alias="price" ctype="" />
      <f name="A.supplierId" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_PriceSupplier AS A WHERE A.deleteFlag = '0'</from>
    <orderby></orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>  
  <query>
    <pool></pool>     
    <name value="getDocumenterayName" />
    <where>
    	<w name="A.costName" des=""  reqName="costName" dtype="ch" oper="like"  lg="AND" bt="" />
    </where>
    <select>
      <f name="A.costName" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>b_orderexpense AS A WHERE A.deleteFlag='0' AND A.type='D'</from>
    <orderby>A.costName</orderby>
    <groupby>A.costName</groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getOrderBomByYSId" />
     <where>
       <w name="YSId" des=""  reqName="YSId" dtype="ch" oper="="  lg="AND" bt="" />
    </where>
  <select>
      <f name="recordId" alias="" ctype="" />
      <f name="YSId" alias="" ctype="" />
      <f name="bomId" alias="" ctype="" />
      <f name="materialId" alias="" ctype="" />
      <f name="materialName" alias="" ctype="" />
      <f name="supplierId" alias="" ctype="" />
      <f name="quantity" alias="" ctype="" />
      <f name="price" alias="" ctype="" />
      <f name="totalPrice" alias="" ctype="" />
      <f name="planDate" alias="" ctype="" />
      <f name="parentId" alias="" ctype="" />
      <f name="materialRecordId" alias="" ctype="" />
      <f name="unit" alias="" ctype="计量单位" />
      <f name="subBomId" alias="" ctype="" />
      <f name="IFNULL(subbomno,0)" alias="subbomno" ctype="" />
      <f name="quantityOnHand" alias="" ctype="" />
      <f name="availabelToPromise" alias="" ctype="" />
      <f name="deleteFlag" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>v_orderbom A WHERE A.deleteFlag = '0' </from>
    <orderby>a.subBomNo+0,a.materialId</orderby>
    <groupby></groupby>
    <having></having>
	<power></power>    
  </query>
  <query>
    <pool></pool>    
    <name value="getOrderBomList" />
     <where>
   		<w name="A.fullField" des="" reqName="keyword1" dtype="ch" oper="like" lg="AND" bt="" />
       	<w name="A.fullField" des="" reqName="keyword2" dtype="ch" oper="like" lg="AND" bt="" />
    </where>
  <select>
      <f name="recordId" alias="" ctype="" />
      <f name="YSId" alias="" ctype="" />
      <f name="bomId" alias="" ctype="" />
      <f name="materialId" alias="" ctype="" />
      <f name="materialName" alias="" ctype="" />
      <f name="quantity" alias="" ctype="" />
      <f name="deliveryDate" alias="" ctype="" />
      <f name="unit" alias="" ctype="计量单位" />
      <f name="deleteFlag" alias="" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>v_orderbomlist A WHERE A.deleteFlag = '0' </from>
    <orderby>a.bomId</orderby>
    <groupby></groupby>
    <having></having>
	<power></power>    
  </query>
  
  <query>
    <pool></pool>     
    <name value="createorderfromproduct" />
    <where>
      <w name="A.materialId" des=""  reqName="materialId" dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.customerId" alias="" ctype="" />
      <f name="A.shortName" alias="" ctype="" />
      <f name="A.CustomerName" alias="fullName" ctype="" />
      <f name="A.currency" alias="currencyId" ctype="" />
      <f name="A.shippingCase" alias="shippingCaseId" ctype="" />
      <f name="A.loadingPort" alias="loadingPortId" ctype="" />
      <f name="A.deliveryPort" alias="deliveryPortId" ctype="" />
      <f name="A.paymentTerm" alias="" ctype="" />
      <f name="A.currency" alias="currency" ctype="币种" />
      <f name="A.shippingCase" alias="shippingCase" ctype="出运条件" />
      <f name="A.loadingPort" alias="loadingPort" ctype="出运港" />
      <f name="A.deliveryPort" alias="deliveryPort" ctype="目的港" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
    <from>v_createorderfromproduct AS A WHERE A.deleteFlag = '0' </from>
    <orderby>A.materialId</orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>  
  <query>
    <pool></pool>    
    <name value="orderTrackingDetail" />
    <where>
    	<w name="a.YSId" des="" reqName="YSId" dtype="ch" oper="=" lg="AND" bt="" />
    	<w name="LEFT(a.materialId,1)" des="" reqName="materialH" dtype="ch" oper="&lt;&gt;" lg="AND" bt="" />
    </where>
  	<select>
      <f name="a.recordId" alias="" ctype="" />
      <f name="a.purchaseId" alias="" ctype="" />
      <f name="a.planRecordId" alias="" ctype="" />
      <f name="a.YSId" alias="" ctype="" />
      <f name="IFNULL(c.supplierId,'')" alias="contractSupplierId" ctype="" />
      <f name="IFNULL(c.contractId,'')" alias="contractId" ctype="" />
      <f name="IFNULL(c.price,'0')" alias="contractPrice" ctype="" />
      <f name="IFNULL(c.deliveryDate,'')" alias="deliveryDate" ctype="" />
      <f name="a.materialId" alias="" ctype="" />
      <f name="a.materialName" alias="" ctype="" />
      <f name="a.materialParentId" alias="" ctype="" />
      <f name="a.materialRecordId" alias="" ctype="" />
      <f name="a.unit" alias="unitName" ctype="计量单位" />
      <f name="a.price" alias="" ctype="" />
      <f name="a.totalPrice" alias="" ctype="" />
      <f name="a.supplierId" alias="" ctype="" />
      <f name="lastPrice" alias="lastPrice" ctype="" />
      <f name="b.lastSupplierId" alias="" ctype="" />
      <f name="minPrice" alias="minPrice" ctype="" />
      <f name="b.minSupplierId" alias="" ctype="" />
      <f name="a.purchaseQuantity" alias="" ctype="" />
      <f name="a.planDate" alias="" ctype="" />
      <f name="a.bomCost" alias="" ctype="" />
      <f name="a.managementCost" alias="" ctype="" />
      <f name="a.managementCostRate" alias="" ctype="" />
      <f name="a.productId" alias="" ctype="" />
      <f name="a.productCost" alias="" ctype="" />
      <f name="a.materialCost" alias="" ctype="" />
      <f name="a.laborCost" alias="" ctype="" />
      <f name="a.totalCost" alias="" ctype="" />
      <f name="a.availabelToPromise" alias="" ctype="" />
      <f name="a.waitStockIn" alias="" ctype="" />
      <f name="a.waitStockOut" alias="" ctype="" />
      <f name="a.quantityOnHand" alias="" ctype="" />
      <f name="a.manufactureQuantity" alias="" ctype="" />
      <f name="a.priceStatus" alias="" ctype="" />
      <f name="a.purchaseType" alias="" ctype="物料采购类别" />
      <f name="a.purchaseType" alias="purchaseTypeId" ctype="" />
      <f name="a.unitQuantity" alias="" ctype="" />
      <f name="a.subbomno" alias="" ctype="" />
      <f name="e.materialId" alias="arrivalMaterialId" ctype="" />
      <f name="f.materialId" alias="stockinMaterialId" ctype="" />
      <f name="IFNULL(c.quantity,'0')"         alias="contractQty" ctype="" />
      <f name="IFNULL(e.arrivalCount,0)" alias="arrivalCount" ctype="" />
      <f name="IFNULL(f.quantity,0)"     alias="stockinQty" ctype="" />
      <f name="IFNULL(g.sumReturnQty,0)" alias="returnQty" ctype="" />
  </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <!-- $：由程序根据where句的情况追加where关键字' 无$：程序不负责追加where关键字，在from句中需写入where关键字 -->
   <from>v_purchaseplan a LEFT JOIN b_PriceReference b ON a.materialId = b.materialId AND b.deleteFlag='0' LEFT JOIN v_purchaseorderdetail c ON a.ysid = c.ysid  AND a.supplierId = c.supplierId AND a.materialId = c.materialId AND c.deleteFlag = '0'  LEFT JOIN ( SELECT a.YSId,a.materialId, sum( REPLACE (a.quantity, ',', '') ) AS arrivalCount FROM b_arrival a WHERE (a.deleteFlag = '0') AND a.status = '010' GROUP BY a.YSId,a.materialId ) e ON a.YSId=e.YSId AND a.materialId=e.materialId LEFT JOIN v_purchasestockindetailgroup f ON a.YSId=f.YSId AND a.materialId=f.materialId LEFT JOIN v_inspectionreturngroup g ON g.YSId=a.YSId AND a.materialId = g.materialId where a.deleteFlag='0' </from>
    <orderby>a.subBomNo+0,a.materialId</orderby>
    <groupby></groupby>
    <having>stockinQty &lt; contractQty OR contractId =''</having>
	<power></power>    
  </query>
  <query>
    <pool></pool>     
    <name value="getOrderCancelList" />
    <where>
      <w name="A.full_field" des=""  reqName="keyword1" dtype="ch" oper="like"  lg="AND" bt="" />
   	  <w name="A.full_field" des=""  reqName="keyword2" dtype="ch" oper="like"  lg="AND" bt="" />   
     </where>
    <select>
      <f name="A.recordId" alias="" ctype="" />
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.shippingCase" alias="" ctype="" />
      <f name="A.loadingPort" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.orderId" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.status" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
      <f name="a.cancelQuantity" alias="" ctype="" />
      <f name="a.OriginalQuantity" alias="" ctype="" />
      <f name="a.cancelDate" alias="" ctype="" />
      <f name="a.remarks" alias="" ctype="" />
      <f name="a.cancelStatus" alias="" ctype="" />
      <f name="a.recordId" alias="cancelRecordId" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <from>v_ordercancellist AS A  </from>
    <orderby>A.YSId </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
  <query>
    <pool></pool>     
    <name value="orderCancelDetail" />
    <where>
      <w name="A.YSId" des=""  reqName="YSId" dtype="ch" oper="="  lg="AND" bt="" />
     </where>
    <select>
      <f name="A.recordId" alias="" ctype="" />
      <f name="A.materialId" alias="" ctype="" />
      <f name="A.materialName" alias="" ctype="" />
      <f name="A.PIId" alias="" ctype="" />
      <f name="A.YSId" alias="" ctype="" />
      <f name="A.quantity" alias="" ctype="" />
      <f name="A.price" alias="" ctype="" />
      <f name="A.totalprice" alias="" ctype="" />
      <f name="A.shippingCase" alias="" ctype="" />
      <f name="A.loadingPort" alias="" ctype="" />
      <f name="A.orderDate" alias="" ctype="" />
      <f name="A.orderId" alias="" ctype="" />
      <f name="A.deliveryDate" alias="" ctype="" />
      <f name="A.status" alias="" ctype="" />
      <f name="A.orderType" alias="" ctype="" />
      <f name="a.cancelQuantity" alias="" ctype="" />
      <f name="a.OriginalQuantity" alias="" ctype="" />
      <f name="a.cancelDate" alias="" ctype="" />
      <f name="a.remarks" alias="" ctype="" />
      <f name="a.cancelStatus" alias="" ctype="" />
      <f name="a.cancelRecordId" alias="" ctype="" />
    </select>
    <!-- 条件可以获得系统变量值 '@:来源session,#来源 2016/1/8未实现' -->
    <from>v_ordercancellist AS A  </from>
    <orderby>A.YSId </orderby>
    <groupby></groupby>
    <having></having>
	<power>
	</power>    
  </query>
</root>